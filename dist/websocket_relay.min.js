"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1);"undefined"==typeof window?e.exports=r:window.WebSocketRelay=r},function(e,t,n){(function(e){function t(e,t,n){i(e,t);var u={},a={},c=new f(e),l=this;c.onopen=function(){l.emit("open"),"function"==typeof n&&n(),s(c,{authentication:{clientId:t.clientId,token:t.token}})},this.createChannel=function(e){var t=u[e],n=new r(c,e,t);return a[e]=n,n},c.onmessage=function(e){if(o(e.data)){var t=JSON.parse(e.data);if(t.error)throw t.error;if(!t.relay)throw"unrecognized ws message";var n=a[t.relay.senderId];if(n)n.emit("message",t.relay.message);else{var r=u[t.relay.senderId];void 0===r?u[t.relay.senderId]=[t.relay.message]:r.push(t.relay.message)}}}}function r(e,t,n){var r=this;this.send=function(n){s(e,{relay:{targetId:t,message:n}})},this.emitQueuedMessages=function(){if(n)for(;n.length>0;)r.emit("message",n.pop())}}function i(e,t){if(void 0===e)throw new Error("first parameter is required");if(void 0===t)throw new Error("second parameter is required");if(void 0===t.clientId)throw new Error("clientId property is required in authentication object");if(void 0===t.token)throw new Error("token property is required in authentication object")}function o(e){try{return JSON.parse(e),!0}catch(t){return!1}}function s(e,t){e.send(JSON.stringify(t))}var u=n(3);if("undefined"==typeof f)var f=e.require("ws");t.prototype=Object.create(u.prototype),r.prototype=Object.create(u.prototype),e.exports=t}).call(t,n(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){var r;(function(){function t(){}function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}var s=t.prototype,u=this,f=u.EventEmitter;s.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},s.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},s.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},s.addListener=function(e,t){var n,r=this.getListenersAsObject(e),o="object"===("undefined"==typeof t?"undefined":_typeof(t));for(n in r)r.hasOwnProperty(n)&&-1===i(r[n],t)&&r[n].push(o?t:{listener:t,once:!1});return this},s.on=o("addListener"),s.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},s.once=o("addOnceListener"),s.defineEvent=function(e){return this.getListeners(e),this},s.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},s.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(n=i(o[r],t),-1!==n&&o[r].splice(n,1));return this},s.off=o("removeListener"),s.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},s.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},s.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!==("undefined"==typeof t?"undefined":_typeof(t))||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},s.removeEvent=function(e){var t,n="undefined"==typeof e?"undefined":_typeof(e),r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},s.removeAllListeners=o("removeEvent"),s.emitEvent=function(e,t){var n,r,i,o,s,u=this.getListenersAsObject(e);for(o in u)if(u.hasOwnProperty(o))for(n=u[o].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),s=r.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},s.trigger=o("emitEvent"),s.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},s.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},s._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},s._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return u.EventEmitter=f,t},r=function(){return t}.call(u,n,u,e),!(void 0!==r&&(e.exports=r))}).call(this)}]);